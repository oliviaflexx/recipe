{% extends "main/base.html" %}
{% block title %}View Ingredients {% endblock %}

{% block content %}
    {% if user.is_authenticated%}
        <div id="content" name="content">
            <form method="post" action="#">
                {% csrf_token %}
                <button type="submit", name="save", value="save">Update My Ingredients</button>
                <input id="searchbar" onkeyup="search_ingredient()" type="text" name="search" placeholder="Search ingredients..">
                {% for ingredient in non_ors%}
                {% if ingredient.checked == True %}
                <li class='ingredient'>{{ingredient.ingredient}}<input type="checkbox" value="{{ingredient.id}}" name= "touched" checked></li>
                {% else %}
                <li class='ingredient'>{{ingredient.ingredient}}<input type="checkbox" value="{{ingredient.id}}" name= "touched"></li>
                {% endif %}
                {% endfor %}
            </form>
    {% else%}
        <a href="/login">Login Here to Access Content</a>
    {% endif %}
{% endblock %}
{% block javascript %}
<script>
    function search_ingredient() {
    let input = document.getElementById('searchbar').value
    input=input.toLowerCase();
    let x = document.getElementsByClassName('ingredient');
     
    for (i = 0; i < x.length; i++) {
        if (!x[i].innerHTML.toLowerCase().includes(input)) {
            x[i].style.display="none";
        }
        else {
            x[i].style.display="list-item";                
        }
    }
}
</script>
{% endblock %}
